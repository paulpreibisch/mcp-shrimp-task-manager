# 🚀 Task Viewer v2.1.0 リリースノート

*リリース日: 2025年7月29日*

## 🎉 新機能

### 🔗 プロジェクトルートサポート付きクリック可能ファイルパス
**ワンクリックで完全なファイルパスをコピー！**

- **クリック・トゥ・コピー ファイルパス**: タスクをクリックしてタスク詳細ページに移動する際、タスクが変更または作成する関連ファイルがリストされていれば、そのファイル名にファイルシステム上の実際のファイルへのハイパーリンクが付きます（プロファイルタブを作成・編集する際にプロジェクトフォルダを設定することが前提）

### 📋 強化されたUUID管理
**直感的な操作でUUIDコピーを効率化**

Claudeとのやり取りで、Shrimpタスクを簡単に参照したい場合があります。例：
「Claude, このShrimpタスクを完了してください: da987923-2afe-4ac3-985e-ac029cc831e7」。そのため、タスク#バッジとタスク名列に表示されるUUIDにクリック・トゥ・コピー機能を追加しました。

- **クリック・トゥ・コピー タスクバッジ**: 任意のタスク番号バッジをクリックしてUUIDを瞬時にコピー
- **タスク名列でのUUID連結表示**: UUIDをクリックしてコピー

### 🔄 並列化を容易にするタスク依存関係列

依存タスクのリンクされたUUIDをリストするDependencies列を追加しました。これにより、依存タスクへのナビゲーションが簡単になりました。

### 🤖 AI指示アクション
**ワンクリックAIタスク指示**

便利なロボット絵文字付きのアクション列を追加しました。絵文字をクリックすると、AI指示がクリップボードにコピーされ、エージェントのチャットに貼り付けできます。指示は次の内容をコピーするようコード化されています：「Use task manager to complete this shrimp task: < UUID >」

この指示は並列化に有用です。例えば、以下の3つのタスクに依存関係がない場合、複数のターミナルウィンドウを開いてAI指示を貼り付けできます。例：

ターミナル1: Use task manager to complete this shrimp task: da987923-2afe-4ac3-985e-ac029cc831e7
ターミナル2: Use task manager to complete this shrimp task: 4afe3f1c-bf7f-4642-8485-668c33a1e0fc
ターミナル3: Use task manager to complete this shrimp task: 21bd2cb9-4109-4897-9904-885ee2b0792e

### ✏️ プロファイル編集ボタン

**プロジェクトルート設定**: プロファイルごとにプロジェクトルートを設定できるようになりました。これにより、タスク詳細ページで「関連ファイル」を表示する際に完全なファイルパスのコピーが可能になります。

**プロファイル名の変更機能**: プロファイルタブを削除・再作成することなく名前を変更できるようになりました。

## 🔄 変更点

### UI/UX改善
- **コピーアクションの効率化**: UUIDコピーをタスクバッジクリックのみに統合
- **メモよりも依存関係**: メモ列をより有用な依存関係列に置き換え
- **アプリ内リリースノート**: タスクビューアーのリリースノートを上部バナーに表示
- **タブベースナビゲーション**: クローズ機能付きタブシステムにリリースノートを統合

### アーキテクチャ更新
- **ES モジュール互換性**: より良いESモジュールサポートのためbusboy依存関係を削除
- **ネイティブフォーム解析**: サードパーティのフォーム解析をNode.js組み込み機能に置き換え
- **バージョンアップ**: 重要な機能追加を反映して（タスクビューアー用に）v2.1.0に更新

## 🐛 バグ修正

### 🚨 重要な修正: ファイルアップロードが静的コピーを作成

**問題**: tasks.jsonファイルをアップロードしてプロファイルを追加する際、システムが`/tmp/`ディレクトリに静的コピーを作成していました。これは、実際のタスクファイルへの変更がビューアーに反映されないことを意味し、タスクが元の状態で停滞したように見える（例：実際は「完了済み」なのに「進行中」と表示される）問題でした。

**解決策**: ファイルアップロードを完全に削除しました。現在はフォルダパスを直接入力する必要があり、システムが自動的に`/tasks.json`を追加します。これにより、ビューアーが常に実際のライブファイルから読み取ることを保証します。

**使用方法**:
1. ターミナルでShrimpデータフォルダに移動
2. `pwd`を入力して完全パスを取得（UIで黄色でハイライト表示）
3. このパスを「タスクフォルダパス」フィールドに貼り付け
4. システムが自動的に`[あなたのパス]/tasks.json`を使用

![プロファイル追加モーダル スクリーンショット](/releases/add-profile-modal.png)

### プロファイル管理
- **自動選択修正**: 新しいプロファイルが作成後に自動的に選択・ロードされるように修正
- **インポート問題解決**: busboyライブラリのESモジュールインポート問題を修正
- **統合編集モーダル**: 名前変更とプロジェクトルート編集を単一のインターフェースに統合

### データハンドリング
- **プロジェクトルート永続化**: プロジェクトルートパスがプロファイルデータと適切に保存されるように修正
- **タスクローディング**: プロファイル切り替え時の競合状態を修正
- **状態管理**: プロファイル選択状態の処理を改善

## 🗑️ 削除された機能

### 廃止機能
- **Busboy依存関係**: ネイティブNode.jsフォーム解析に置き換え
- **メモ列**: より有用な依存関係列に置き換え
- **個別コピーボタン**: UUIDコピーをタスクバッジクリックに統合
- **個別名前変更ボタン**: 統合編集プロファイルボタンにマージ

## 📝 技術詳細

### 新しいAPIエンドポイント
- **PUT /api/update-profile/:id**: プロファイル名と設定の更新
- **強化された /api/tasks/:id**: レスポンスにprojectRootを含むように変更
- **GET /releases/*.md**: リリースノートマークダウンファイルの提供

### フロントエンドコンポーネント
- **ReleaseNotesコンポーネント**: 美しくマークダウンレンダリングされたリリースノート
- **強化されたTaskTable**: 依存関係とアクション列をサポート
- **改善されたTaskDetailView**: 完全パスコピー付きクリック可能ファイルパス

### 設定
- **プロジェクトルートストレージ**: プロファイルにオプションのprojectRootパスを保存
- **設定永続化**: すべてのプロファイルデータを~/.shrimp-task-viewer-settings.jsonに保存

## 🎯 まとめ

バージョン2.1.0では、Task Viewerを強化されたファイルパス管理、改良されたUUID処理、より良いタスク関係の可視化を備えた、より統合された開発ツールに変えています。統合されたプロファイル管理とアプリ内リリースノートにより、クリーンで直感的なインターフェースを維持しながら、より一貫したユーザー体験を提供します。