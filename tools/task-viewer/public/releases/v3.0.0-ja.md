# 🚀 Task Viewer v3.0.0 リリースノート

*リリース日: 2025年8月7日*

## 📑 目次

- [🎉 主要な新機能](#-主要な新機能)
  - [🤖 エージェント管理システム](#-エージェント管理システム)
  - [🤖 AI駆動の一括エージェント割り当て](#-ai駆動の一括エージェント割り当て)
  - [📊 タスク履歴のGitバージョン管理](#-タスク履歴のgitバージョン管理)
  - [📊 プロジェクト履歴ビュー](#-プロジェクト履歴ビュー)
  - [🎨 テンプレート管理システム](#-テンプレート管理システム)
  - [🌍 国際化（i18n）サポート](#-国際化i18nサポート)
  - [🧭 強化されたナビゲーションとUI](#-強化されたナビゲーションとui)
- [🔄 主要な改善](#-主要な改善)
  - [タスク詳細ナビゲーション](#タスク詳細ナビゲーション)
  - [パフォーマンス向上](#パフォーマンス向上)
  - [開発者体験](#開発者体験)
  - [UI/UX改善](#uiux改善)
- [🐛 バグ修正](#-バグ修正)
  - [重要な修正](#重要な修正)
  - [UI修正](#ui修正)
  - [データ処理](#データ処理)
- [🏗️ 技術的更新](#️-技術的更新)
  - [新しい依存関係](#新しい依存関係)
  - [API強化](#api強化)
  - [アーキテクチャの改善](#アーキテクチャの改善)
- [📝 破壊的変更](#-破壊的変更)
  - [設定の更新](#設定の更新)
  - [API変更](#api変更)
- [🚀 移行ガイド](#-移行ガイド)
- [🎯 まとめ](#-まとめ)

## 🎉 主要な新機能

### 🤖 エージェント管理システム
**専門的なタスク処理のための包括的なサブエージェント管理**

SHRIMP-TASK-MANAGERは、さまざまなタイプのタスクに対して専門化されたAIエージェントを定義・使用できる強力なエージェント管理機能をサポートします。エージェントは、最適な実行のためにタスクに割り当てることができる専門化されたAIの個性またはスキルセットです。この機能はClaudeのエージェントシステムとシームレスに統合され、`.claude/agents`フォルダに保存されたカスタムエージェントを活用できます。

主な機能：

- **エージェントリストビュー**: `.claude/agents`フォルダの全利用可能エージェントを詳細情報と共に参照
- **エージェント割り当て**: タスクテーブルのドロップダウンを介してタスクに特定のエージェントを割り当て
- **エージェントビューアポップアップ**: タスクテーブルの目のアイコン（👁️）をクリックしてポップアップエージェントビューアを開き、異なるエージェントをスクロールして各タスクに適したエージェントを選択
- **エージェントエディター**: エージェントメタデータの色のカスタマイゼーションが可能な内蔵エディター
- **グローバル＆プロジェクトエージェント**: プロジェクト固有およびグローバルエージェント定義のサポート
- **ワンクリックAI指示**: ロボット絵文字をクリックしてエージェント固有の指示をクリップボードにコピー
- **エージェントリストAI指示**: エージェントリストにロボット絵文字（🤖）付きの新しいAI指示列で、Claudeで直接使用できる`use subagent [agent-name] located in [path]:`をコピー
- **エージェント情報モーダル**: エージェント間のナビゲーションが可能な詳細なエージェント情報
- **メタデータ統合**: エージェント割り当てがtasks.jsonに直接保存
- **色分け**: カスタム色を使用したエージェントの視覚的区別

#### エージェント割り当てワークフロー：
1. **利用可能なエージェントを表示**: エージェントタブにアクセスして`.claude/agents`フォルダ内のすべてのエージェントを確認
2. **タスクに割り当て**: タスクテーブルのドロップダウンを使用して各タスクにエージェントを選択
3. **指示をコピー**: ロボット絵文字をクリックしてコピー: `use the built in subagent located in ./claude/agents/[agent-name] to complete this shrimp task: [task-id] please when u start working mark the shrimp task as in progress`
4. **エージェントを編集**: カスタム色を含むエージェントのコンテンツとメタデータを変更

![AI指示付きエージェントリストビュー](/releases/agent-list-view-with-ai-instruction.png)
*エージェントリストビューはAI指示列と共にすべての利用可能なエージェントを表示 - ロボット絵文字（🤖）をクリックして`use subagent debugger.md located in ./claude/agents to perform:`のようなエージェント使用指示を直接クリップボードにコピー*

![タスクテーブルのエージェントドロップダウン](/releases/agent-dropdown-task-table.png)
*タスクテーブルのドロップダウンセレクターを使用してタスクにエージェントを割り当て*

![エージェントビューアポップアップ](/releases/agent-viewer-popup.png)
*目のアイコン（👁️）をクリックしてエージェントビューアポップアップを開き、タスク割り当てのための利用可能なエージェントを参照*

![色選択付きエージェントエディター](/releases/agent-editor-color-selection.png)
*視覚的整理のためにエージェントコンテンツを編集し、色でカスタマイズ*

![エージェントコピー指示ツールチップ](/releases/agent-copy-instruction-tooltip.png)
*ロボット絵文字をクリックしてエージェント固有のタスク指示をコピー*

![エージェント情報モーダル](/releases/agent-info-modal.png)
*詳細情報と簡単なナビゲーションでエージェントを参照*

![エージェント用グローバル設定](/releases/global-settings-agents.png)
*システム全体のエージェントにアクセスするためのグローバルClaudeフォルダパスを設定*

### 🤖 AI駆動の一括エージェント割り当て
**OpenAI GPT-4を使用して複数のタスクに最適なエージェントを自動的に割り当て**

Task Viewerは現在OpenAIのGPT-4と統合され、タスクの説明と要件に基づいてインテリジェントにタスクにエージェントを割り当てます。この機能により、多数のタスクに適切なエージェントを設定するのに必要な時間が大幅に削減されます。

主な機能：

- **一括選択**: タスクテーブルのチェックボックスを使用して複数のタスクを選択
- **ワンクリック割り当て**: 「AI割り当てエージェント」をクリックして選択されたすべてのタスクに自動的にエージェントを割り当て
- **インテリジェントマッチング**: GPT-4がタスクの説明とエージェントの能力を分析して最適な割り当てを実行
- **グローバル設定統合**: グローバル設定タブでOpenAI APIキーを設定
- **環境変数サポート**: `OPENAI_API_KEY`または`OPEN_AI_KEY_SHRIMP_TASK_VIEWER`環境変数もサポート
- **エラーガイダンス**: APIキーが設定されていない場合の明確な指示

#### セットアップ手順：
1. **APIキーを設定**: 設定→グローバル設定に移動してOpenAI APIキーを入力
2. **タスクを選択**: チェックボックスを使用してエージェント割り当てが必要なタスクを選択
3. **AI割り当て**: 一括アクションバーの「🤖 AI割り当てエージェント」ボタンをクリック
4. **自動処理**: GPT-4がタスクを分析し、最適なエージェントを割り当て

![グローバル設定OpenAIキー](/releases/global-settings-openai-key.png)
*AI駆動のエージェント割り当てのためにグローバル設定でOpenAI APIキーを設定*

![AI一括エージェント割り当て](/releases/ai-bulk-agent-assignment.png)
*複数のタスクを選択し、「🤖 AI割り当てエージェント（5つのタスクが選択済み）」をクリックしてGPT-4を使用して適切なエージェントを自動的に割り当て*

### 📊 タスク履歴のGitバージョン管理
**タスクのすべての変更を自動Gitコミットで追跡**

SHRIMP-TASK-MANAGERは現在、tasks.jsonファイルのすべての変更を自動的に追跡する内蔵Git統合を含んでいます。これにより、手動介入なしにタスク変更の完全な監査証跡を提供します。

主な機能：

- **自動Git リポジトリ**: 初回使用時にデータディレクトリにGitリポジトリを初期化
- **タイムスタンプ付きコミット**: すべてのタスク操作（作成、更新、削除）がローカルタイムゾーンのタイムスタンプ付きコミットを作成
- **説明的メッセージ**: コミットに変更内容の明確な説明を含む（例：「新しいタスクを追加：ユーザー認証を実装」）
- **非ブロッキング**: Git操作がtry-catchブロックでラップされている - Gitが失敗してもタスク操作は正常に継続
- **分離されたリポジトリ**: Gitリポジトリはタスク履歴のみに使用され、プロジェクトリポジトリと完全に分離
- **マージ競合なし**: 単一ファイル追跡と線形履歴により競合不可能

#### メリット：
- **完全な履歴**: 標準のGitツールを使用してタスクの全進化を確認
- **変更追跡**: タスクがいつどのように変更されたかを正確に確認
- **復旧オプション**: 必要に応じて以前のタスク状態を復元
- **チーム可視性**: チームメンバーとタスク履歴を共有

Git統合は完全に透明で設定不要です。いつでも以下のコマンドを使用して履歴を表示できます：
```bash
cd <shrimp-data-directory>
git log --oneline
```

#### タスク履歴の表示方法

1. **タスクデータディレクトリに移動**（`.mcp.json`で設定された通り）：
   ```bash
   cd <shrimp-data-directory>
   ```

2. **コミット履歴を表示**：
   ```bash
   git log --oneline
   ```

3. **特定の変更を確認**：
   ```bash
   git show <commit-hash>
   ```

4. **バージョンを比較**：
   ```bash
   git diff HEAD~5  # 5コミット前と比較
   ```

5. **以前の状態を復元**（必要に応じて）：
   ```bash
   git checkout <commit-hash> -- tasks.json
   ```

### 📊 プロジェクト履歴ビュー
**プロジェクトのタスク実行履歴を追跡・分析**

SHRIMP-TASK-MANAGERは、新しいタスクセッションを開始するたびに完了したタスクをプロジェクト内のメモリファイルに自動保存します。以前は、この貴重な履歴データがこれらのメモリファイルに隠されており、UIを通じてアクセスできませんでした。新しいプロジェクト履歴ビューはこのタスク履歴を公開し、時間の経過に伴うプロジェクトの進化を探索できます。

この機能により以下が可能になります：

- **履歴タスクスナップショット**: SHRIMP-TASK-MANAGERによって保存されたプロジェクトの過去の状態を参照
- **タスク進化追跡**: 異なるセッション間でタスクが作成から完了までどのように進行したかを確認
- **ノートシステム**: 将来の参照とチーム知識共有のための履歴エントリに個人ノートを追加
- **詳細タスクビュー**: 特定の履歴タスク状態を詳しく調べて過去の決定と実装を理解
- **時間ベースナビゲーション**: プロジェクトのタイムラインをナビゲートしていつ何が達成されたかを確認
- **スナップショット比較**: 異なる時期のタスク状態を比較してプロジェクトの成長と変化を追跡

![プロジェクト履歴ビュースクリーンショット](/releases/project-history-view.png)

![プロジェクト履歴詳細ビュースクリーンショット](/releases/project-history-detail-view.png)

### 🎨 テンプレート管理システム
**AIタスク実行のための強力なテンプレートカスタマイゼーション**

テンプレートは、SHRIMP-TASK-MANAGERがさまざまなタイプの操作を分析・実行する方法をガイドする核となる指示です。計画と分析から実装と検証まで、AIがさまざまなタイプの操作にどのようにアプローチするかを定義します。MCP-TASK-MANAGERは、デフォルトの動作をオーバーライドしたり、既存のテンプレートに追加の指示を追加したりできるカスタムテンプレートを可能にします。

この新しいテンプレート管理インターフェースは以下のための直感的な方法を提供します：

- **テンプレートエディター**: カスタムAI指示を作成するためのシンタックスハイライト付きフル機能マークダウンエディター
- **テンプレートプレビュー**: アクティベーション前のテンプレートのライブプレビューで要件を満たしていることを確認
- **テンプレート複製**: 異なる使用ケースのために既存テンプレートのバリエーションを簡単に作成
- **テンプレート状態追跡**: デフォルト（オリジナル）、カスタム（完全置換）、カスタム+追加（デフォルトへの追加）状態を示すビジュアルインジケーター
- **デフォルトにリセット**: 必要時にオリジナルテンプレートをワンクリック復元
- **テンプレートエクスポート**: バックアップ、チームメンバーとの共有、またはバージョン管理のためにカスタムテンプレートをエクスポート
- **アクティベーションダイアログ**: 偶発的な変更を防ぐためのテンプレートアクティベーション時の明確な確認

![テンプレート管理システムスクリーンショット](/releases/template-management-system.png)

### 🌍 国際化（i18n）サポート
**シームレスな言語切り替えによる多言語サポート**

- **3つの言語をサポート**: 英語（en）、中国語（中文）、スペイン語（Español）
- **永続的な言語選択**: 言語設定が保存され記憶される
- **完全なUI翻訳**: すべてのUI要素、ボタン、ラベル、メッセージが完全に翻訳
- **動的言語切り替え**: ページリロードなしでオンザフライで言語変更
- **言語コンテキストプロバイダー**: 一貫した翻訳のための中央集権的言語管理

### 🧭 強化されたナビゲーションとUI
**モダンで直感的なインターフェース改善**

- **ネストタブシステム**: プライマリとセカンダリタブによる整理されたナビゲーション
- **URL状態同期**: 現在のビューを反映するブラウザURL更新
- **タスク詳細ナビゲーション**: リストに戻ることなく順次タスクレビューを可能にする前/次ボタン
- **ローディングスピナー**: データロード中のビジュアルフィードバック
- **トースト通知**: 非侵入的な成功/エラーメッセージ
- **レスポンシブデザイン**: 改善されたモバイル・タブレット体験
- **モーダル改善**: より良いモーダルレイアウトとインタラクション
- **キーボードナビゲーション**: 詳細ビューでのより高速なタスクナビゲーションのための矢印キーサポート

## 🔄 主要な改善

### タスク詳細ナビゲーション
**シームレスなタスクレビューワークフロー**

タスク詳細ビューには現在、タスクをレビューし作業する方法を変革する前/次ナビゲーションボタンが含まれています：

- **順次ナビゲーション**: メインリストに戻ることなく順序通りにタスクを移動
- **コンテキスト保持**: タスク間で切り替えながら詳細ビューに留まる
- **ビジュアルインジケーター**: ボタンにタスク番号を表示（例：「← 前（タスク3）」と「次（タスク5）→」）
- **スマート境界**: 最初と最後のタスクでナビゲーションボタンを無効化
- **キーボードショートカット**: さらに高速なナビゲーションのために矢印キーを使用
- **効率向上**: 往復クリックより3-5倍高速な全タスクリストレビュー

この機能は以下の場合に特に有用です：
- AI分析から新しく作成されたタスクのレビュー
- 一連の依存タスクの作業
- 複数の関連タスクの実装詳細の確認
- タスク監査またはレビューの実行

### パフォーマンス向上
- **最適化された再レンダリング**: より良いパフォーマンスのためにReact hooksを適切にメモ化
- **遅延ロード**: より高速な初期ページロードのためのオンデマンドコンポーネントロード
- **効率的な状態管理**: 不要な状態更新の削減
- **バッチ更新**: よりスムーズなUIのための複数状態変更のバッチ処理

### 開発者体験
- **包括的テストスイート**: 統合・言語機能テストを追加
- **テストチェックリスト**: 構造化されたテストドキュメント
- **より良いエラーハンドリング**: より有益なエラーメッセージ
- **デバッグログ**: 開発用の強化されたデバッグ機能

### UI/UX改善
- **改善されたタスクテーブル**: より良いカラムサイジングとテキスト折り返し
- **強化されたモーダル**: 一貫したモーダルスタイリングと動作
- **より良いタイポグラフィー**: 更新されたフォントサイズによる読みやすさの改善
- **カラースキーム更新**: よりアクセシブルな色彩コントラスト
- **アイコンの一貫性**: アプリ全体での統一されたアイコン使用

## 🐛 バグ修正

### 重要な修正
- **useRef Hookエラー**: アプリクラッシュを引き起こす欠落したReact hook インポートを修正
- **翻訳キー**: すべてのサポート言語に対する欠落した翻訳キーを追加
- **シンボリックリンクループ**: Screenshotsディレクトリの無限ループ問題を解決
- **Windowsパス処理**: Windows 11でのfile:// URI問題を修正
- **リポジトリリンク**: すべてのリポジトリ参照を修正

### UI修正
- **モーダルZ-index**: モーダルレイヤリング問題を修正
- **タブ選択**: ページリロード時のタブ永続性を修正
- **言語セレクター**: 状態同期問題を修正
- **コピー機能**: クリップボード操作の信頼性を向上
- **レスポンシブレイアウト**: モバイルビューポート問題を修正

### データ処理
- **プロフィールローディング**: プロフィール切り替え時の競合状態を修正
- **タスクリフレッシュ**: 自動リフレッシュの信頼性を向上
- **履歴ローディング**: 履歴ビューのページネーション問題を修正
- **テンプレート保存**: テンプレート永続性バグを解決

## 🏗️ 技術的更新

### 新しい依存関係
- `@headlessui/react`: モダンUIコンポーネント
- `@tanstack/react-table`: 高度なテーブル機能
- `@uiw/react-md-editor`: テンプレート用マークダウン編集
- TypeScriptサポートのための追加型定義

### API強化
- **GET /api/templates**: すべての利用可能なテンプレートをリスト
- **PUT /api/templates/:name**: テンプレートコンテンツを更新
- **POST /api/templates/:name/duplicate**: テンプレートを複製
- **GET /api/history/:profileId**: プロジェクト履歴を取得
- **強化されたエラーレスポンス**: より詳細なAPIエラーメッセージ

### アーキテクチャの改善
- **コンポーネントモジュール化**: より良い関心の分離
- **カスタムHooks**: 再利用可能なロジックをhooksに抽出
- **コンテキストプロバイダー**: 中央集権的状態管理
- **ユーティリティ関数**: 一般的な操作のための共有ユーティリティ

## 📝 破壊的変更

### 設定の更新
- **言語設定**: 新しい言語設定ストレージフォーマット
- **テンプレートストレージ**: テンプレートが現在ユーザーホームディレクトリに保存
- **URL構造**: より良いナビゲーションのための更新されたURLパターン

### API変更
- **プロフィールエンドポイント**: より多くのメタデータを含む更新されたレスポンスフォーマット
- **タスクエンドポイント**: 追加フィルタリングオプションで強化
- **テンプレートエンドポイント**: テンプレート管理のための新しいエンドポイント構造

## 🚀 移行ガイド

### v2.1からv3.0へ
1. **言語選択**: デフォルト言語は英語になります。新しいセレクターから希望言語を選択
2. **テンプレート**: 既存のカスタムテンプレートは保持されますが再アクティベーションが必要な場合があります
3. **ブラウザキャッシュ**: 最適なパフォーマンスのためにブラウザキャッシュをクリア
4. **プロフィールデータ**: すべての既存プロフィールは変更なしで継続動作

## 🎯 まとめ

バージョン3.0はTask Viewerの大きな飛躍を表し、シンプルなタスク視覚化ツールから包括的なタスク管理・カスタマイゼーションプラットフォームへと変革しました。完全な国際化サポート、強力なテンプレート管理、AI駆動の自動化、Gitベースの履歴追跡機能により、このリリースはチームにAI支援開発ワークフローへの前例のない制御を提供します。

このリリースの主要ハイライト：
- **AI駆動のエージェント割り当て**: GPT-4を活用してタスクに最適なエージェントを自動割り当て
- **Gitバージョン管理**: タイムスタンプ付きコミットによる全タスク変更の自動追跡
- **多言語サポート**: 英語、中国語、スペイン語による完全な国際化
- **テンプレート管理**: テンプレート編集によるAI動作の深いカスタマイゼーション
- **履歴ビュー**: Gitコミットとメモリスナップショットによるプロジェクト進化の完全な可視性

3言語サポート（英語、中国語、スペイン語）の追加により、ツールがグローバルな対象者にアクセス可能になり、テンプレート管理システムはAI動作の深いカスタマイゼーションを可能にします。Git統合はすべてのタスク変更の永続的な監査証跡を提供し、AI駆動の一括割り当て機能はタスク設定を劇的に高速化します。

このリリースは将来の強化の基盤を設定し、Task ViewerをモダンなAI支援開発ツールキットの必須ツールとして位置付けます。