# ü¶ê Notas de Lan√ßamento da Vers√£o 4.0.0

*Lan√ßado: 3 de setembro de 2025*

## üìã √çndice

- [Novos Recursos Principais](#novos-recursos-principais)
  - [Exibi√ß√£o de Solicita√ß√£o Inicial e Gera√ß√£o de Resumo](#exibi√ß√£o-de-solicita√ß√£o-inicial-e-gera√ß√£o-de-resumo)
  - [Experi√™ncia Aprimorada das Notas de Lan√ßamento](#experi√™ncia-aprimorada-das-notas-de-lan√ßamento)
  - [Sistema de Gerenciamento de Arquivos](#sistema-de-gerenciamento-de-arquivos)
  - [Gerenciamento de Agentes Aprimorado](#gerenciamento-de-agentes-aprimorado)
  - [Visualiza√ß√£o de Hist√≥rico Redesenhada](#visualiza√ß√£o-de-hist√≥rico-redesenhada)
- [Melhorias T√©cnicas](#melhorias-t√©cnicas)
  - [Performance e Infraestrutura](#performance-e-infraestrutura)
  - [Cobertura de Testes](#cobertura-de-testes)
- [Corre√ß√µes de Bugs Cr√≠ticos](#corre√ß√µes-de-bugs-cr√≠ticos)
  - [Problemas de Rolagem Resolvidos](#problemas-de-rolagem-resolvidos)
  - [Corre√ß√µes de UI/UX](#corre√ß√µes-de-uiux)
- [Como Atualizar](#como-atualizar)
- [O Que Vem Por A√≠](#o-que-vem-por-a√≠)

## üéâ Novos Recursos Principais

### üí° Exibi√ß√£o de Solicita√ß√£o Inicial e Gera√ß√£o de Resumo

A capacidade de ver e entender o contexto por tr√°s das suas listas de tarefas agora est√° dispon√≠vel. A Exibi√ß√£o de Solicita√ß√£o Inicial captura e armazena permanentemente a solicita√ß√£o original do usu√°rio que iniciou o planejamento de tarefas. Isso significa que semanas ou meses depois, voc√™ pode instantaneamente refrescar sua mem√≥ria sobre por que essas tarefas existem e qual problema elas pretendiam resolver.

Al√©m disso, agora existe um recurso inteligente de Resumo que utiliza o OpenAI para gerar vis√µes gerais concisas do que foi realizado. Simplesmente clique no bot√£o Resumo, e usando sua chave de API do OpenAI, o sistema analisar√° todas as tarefas conclu√≠das e fornecer√° uma sinopse clara do seu progresso. Isso √© inestim√°vel para atualiza√ß√µes de status de projeto, comunica√ß√µes em equipe, ou simplesmente entender onde voc√™ est√° com implementa√ß√µes complexas.

### üìñ Experi√™ncia Aprimorada das Notas de Lan√ßamento

O sistema de Notas de Lan√ßamento foi completamente reimaginado desde o in√≠cio. Em vez de texto est√°tico, voc√™ agora tem uma experi√™ncia interativa e naveg√°vel com um √çndice recolh√≠vel na barra lateral. Cada vers√£o pode ser expandida para mostrar seu esbo√ßo de se√ß√£o, permitindo que voc√™ pule rapidamente para a informa√ß√£o que precisa.

A implementa√ß√£o inclui estiliza√ß√£o sofisticada com cabe√ßalhos codificados por cores - rosa para se√ß√µes principais, branco para "Novos Recursos", laranja para "Corre√ß√µes de Bugs", e azul claro para se√ß√µes de vis√£o geral. O texto √© 25% maior para melhor legibilidade, e todos os elementos markdown de h2 a h5 s√£o renderizados adequadamente.

As √°reas da barra lateral e conte√∫do rolam independentemente, garantindo que voc√™ nunca perca sua posi√ß√£o ao navegar atrav√©s de documenta√ß√£o extensa. Barras de rolagem personalizadas com tema teal fornecem consist√™ncia visual com a linguagem de design da aplica√ß√£o.

### üìö Sistema de Gerenciamento de Arquivos

O recurso de Arquivo revoluciona como voc√™ gerencia suas listas de tarefas. Voc√™ j√° criou um conjunto complexo de tarefas de uma solicita√ß√£o inicial detalhada, apenas para perceber que precisa trabalhar em algo mais primeiro? O sistema de Arquivos resolve esse problema perfeitamente.

Quando voc√™ arquiva uma lista de tarefas, toda a cole√ß√£o de tarefas - incluindo a solicita√ß√£o inicial que as gerou - √© armazenada com seguran√ßa para uso posterior. Isso permite que voc√™ comece do zero com uma nova lista de tarefas sem perder nenhum do seu trabalho de planejamento anterior. Quando estiver pronto para retornar √†quelas tarefas arquivadas, simplesmente importe-as de volta ao seu fluxo de trabalho atual. Isso √© particularmente √∫til para desenvolvedores que trabalham em m√∫ltiplos recursos simultaneamente ou precisam mudar contextos frequentemente.

A interface de Arquivos compartilha o mesmo design polido da p√°gina de Hist√≥rico, fornecendo uma experi√™ncia de usu√°rio consistente e intuitiva atrav√©s da aplica√ß√£o. Voc√™ pode visualizar todas as suas listas de tarefas arquivadas, ver quando foram criadas, e rapidamente restaurar qualquer arquivo quando necess√°rio.

![Di√°logo de Arquivo](./archive-dialog.png)
*O di√°logo Arquivar Tarefas Atuais que aparece quando voc√™ pressiona o bot√£o Arquivar na aba Tarefas. Ele mostra um resumo do que ser√° arquivado, incluindo o nome do projeto, contagem de tarefas, divis√£o de status, e a solicita√ß√£o inicial completa que criou essas tarefas*

A visualiza√ß√£o da Lista de Arquivos exibe todas as suas listas de tarefas arquivadas com suas solicita√ß√µes iniciais e estat√≠sticas de tarefas:

![Lista de Arquivos](./archive-list.png)
*A aba Arquivo mostrando uma lista de listas de tarefas arquivadas. Note que os usu√°rios podem clicar em "Visualizar" para examinar todas as tarefas dentro da lista de tarefas arquivada, "Excluir" para remover permanentemente um arquivo, ou pressionar o bot√£o "Importar" para restaurar tarefas ao seu fluxo de trabalho atual*

Quando estiver pronto para restaurar um arquivo, o di√°logo de Importa√ß√£o oferece op√ß√µes para adicionar tarefas √† sua lista atual ou substitu√≠-las inteiramente:

![Di√°logo de Importar Arquivo](./archive-import.png)
*O di√°logo Importar Arquivo que aparece quando voc√™ pressiona Importar. Ele oferece op√ß√µes flex√≠veis para restaurar tarefas arquivadas - ou adicion√°-las √† lista de tarefas atual ou substituir completamente as tarefas existentes pelas arquivadas*

Uma vez importadas, voc√™ pode visualizar todos os detalhes das tarefas arquivadas, incluindo a solicita√ß√£o inicial completa e divis√£o de tarefas:

![Visualiza√ß√£o de Detalhes do Arquivo](./archive-details.png)
*P√°gina de Detalhes do Arquivo mostrando a lista completa de tarefas com solicita√ß√£o inicial e resumo*

### Novas Ferramentas MCP Adicionadas

Como agora temos Arquivamento e Hist√≥rico no Visualizador de Tarefas, achamos melhor garantir que a ferramenta MCP tamb√©m seja atualizada para que seu agente Claude possa controlar completamente arquivos e hist√≥rico.

Um conjunto abrangente de ferramentas MCP (Model Context Protocol) foi implementado para fornecer acesso program√°tico √† funcionalidade de arquivo e hist√≥rico. Essas ferramentas permitem que agentes IA e sistemas externos interajam com fluxos de trabalho de gerenciamento de tarefas atrav√©s de APIs estruturadas.

**Sete Novas Ferramentas MCP:**

- **create_archive**: Criar backups de listas de tarefas atuais com descri√ß√µes opcionais para organiza√ß√£o
- **list_archives**: Navegar por todas as listas de tarefas arquivadas com metadados incluindo datas de cria√ß√£o e contagens de tarefas  
- **restore_from_archive**: Importar tarefas arquivadas de volta ao fluxo de trabalho atual com op√ß√µes de mesclar ou substituir
- **get_task_history**: Recuperar trilhas de auditoria abrangentes de todas as mudan√ßas, atualiza√ß√µes e transi√ß√µes de estado de tarefas
- **get_deleted_tasks**: Acessar informa√ß√µes sobre tarefas exclu√≠das para fins de recupera√ß√£o ou auditoria
- **recover_task**: Restaurar tarefas previamente exclu√≠das pelos seus identificadores √∫nicos
- **sync_task_state**: Sincronizar consist√™ncia de dados de tarefas atrav√©s de diferentes locais de armazenamento e resolver conflitos

Cada ferramenta inclui valida√ß√£o robusta de esquema Zod, tratamento abrangente de erros, e suporte a templates bil√≠ngues (Ingl√™s/Chin√™s). A implementa√ß√£o apresenta integra√ß√£o adequada ao TypeScript com o modelo de tarefa existente e mant√©m compatibilidade total com a interface web.

### ü§ñ Gerenciamento de Agentes Aprimorado

As capacidades dos agentes foram significativamente expandidas neste lan√ßamento. O novo recurso de atribui√ß√£o de agentes em lote permite que voc√™ atribua m√∫ltiplas tarefas a agentes IA simultaneamente atrav√©s de uma interface de dropdown intuitiva. Atribui√ß√µes de tarefas individuais agora acontecem sem atualiza√ß√µes de p√°gina, tornando o fluxo de trabalho mais suave e eficiente.

O modal de informa√ß√µes do agente foi completamente reformulado para fornecer descri√ß√µes mais claras e melhor visibilidade das capacidades dos agentes. Problemas cr√≠ticos onde descri√ß√µes de agentes apareciam em branco foram corrigidos, junto com os erros 500 que ocorriam ao trabalhar com listas de tarefas de produ√ß√£o.

### üìä Visualiza√ß√£o de Hist√≥rico Redesenhada

A Visualiza√ß√£o de Hist√≥rico foi transformada para combinar com a interface polida do sistema de Arquivos. Mais importante, ela agora exibe a Solicita√ß√£o Inicial em vez de notas na visualiza√ß√£o principal, dando contexto imediato sobre cada lista de tarefas hist√≥rica. O layout foi otimizado com melhor espa√ßamento de colunas e capacidades de filtragem mais eficientes.

## üîß Melhorias T√©cnicas

### Performance e Infraestrutura

Melhorias significativas foram feitas na performance da aplica√ß√£o e experi√™ncia de desenvolvimento. O novo sistema de build inclui um comando `npm run build` simplificado que automaticamente constr√≥i e inicia o servidor. Playwright foi integrado para testes end-to-end, garantindo confiabilidade da UI atrav√©s de atualiza√ß√µes.

O servidor foi aprimorado com novos endpoints de arquivo com tratamento de erros e valida√ß√£o melhorados. Tempos de resposta foram otimizados atrav√©s de melhores estrat√©gias de busca de dados.

**Arquitetura do Servidor MCP:**

A implementa√ß√£o do servidor MCP usa uma classe Server de baixo n√≠vel com StdioServerTransport para comunica√ß√£o confi√°vel com Claude. A arquitetura inclui:

- Registro adequado de ferramentas via `setRequestHandler` para `ListToolsRequestSchema` e `CallToolRequestSchema`
- Declara√ß√£o de capacidades do servidor com defini√ß√µes abrangentes de ferramentas
- Tratamento robusto de erros com logging detalhado e mensagens de erro amig√°veis ao usu√°rio
- Armazenamento de tarefas baseado em mem√≥ria com persist√™ncia JSON e backups autom√°ticos
- Suporte a templates bil√≠ngues com gera√ß√£o de conte√∫do din√¢mica

### Cobertura de Testes

Este lan√ßamento inclui cobertura abrangente de testes para todos os novos recursos:
- Testes de funcionalidade de arquivo
- Testes de rolagem das Notas de Lan√ßamento
- Testes de integra√ß√£o da Visualiza√ß√£o de Hist√≥rico
- Testes de atribui√ß√£o de agentes
- Testes de gera√ß√£o de resumo
- **Testes de valida√ß√£o de ferramentas MCP**: Testes completos de fluxo de trabalho de arquivo/restaura√ß√£o com cen√°rios reais de cria√ß√£o, arquivamento e restaura√ß√£o de tarefas
- **Testes de processamento de templates**: Verifica√ß√£o de renderiza√ß√£o de templates Handlebars e substitui√ß√£o de vari√°veis
- **Testes de tratamento de erros**: Testes abrangentes de casos extremos e cen√°rios de falha atrav√©s de todas as ferramentas MCP

## üêõ Corre√ß√µes de Bugs Cr√≠ticos

### Problemas de Rolagem Resolvidos

Os problemas cr√≠ticos de visibilidade da barra de rolagem que afetavam as Notas de Lan√ßamento e outras abas foram corrigidos. A aplica√ß√£o agora exibe adequadamente barras de rolagem com estiliza√ß√£o personalizada, garantindo que o conte√∫do seja sempre acess√≠vel. Rolagem independente entre √°reas da barra lateral e conte√∫do funciona perfeitamente.

### Corre√ß√µes de UI/UX

- Posicionamento de setas em se√ß√µes recolh√≠veis foi corrigido
- Contraste de cores foi melhorado atrav√©s da interface
- Estados de carregamento agora s√£o mais informativos
- Mensagens de erro fornecem orienta√ß√£o mais clara

### Corre√ß√µes P√≥s-Lan√ßamento (Setembro 2025)

V√°rias quest√µes cr√≠ticas foram identificadas e resolvidas ap√≥s o lan√ßamento inicial:

#### Corre√ß√µes de Scroll Spy e √çndice

- **Corre√ß√£o de destaque duplicado do scroll spy**: Se√ß√µes com nomes id√™nticos (como "Como Usar") estavam causando m√∫ltiplas entradas do TOC a serem destacadas simultaneamente. Implementada gera√ß√£o de ID √∫nica usando contexto pai para garantir que apenas a se√ß√£o correta seja destacada conforme voc√™ rola.
- **Corre√ß√£o de destaque quebrado do scroll spy**: A funcionalidade de scroll spy parou de funcionar inteiramente ap√≥s implementar IDs √∫nicos. Adicionadas fun√ß√µes centralizadas de gera√ß√£o de ID para garantir consist√™ncia entre an√°lise do √≠ndice e renderiza√ß√£o de conte√∫do.
- **Corre√ß√£o do bot√£o Recolher Todos nas Notas de Lan√ßamento**: O bot√£o n√£o estava funcionando devido ao tratamento incorreto do escopo da vers√£o. Atualizadas as fun√ß√µes expandir/recolher para aceitar par√¢metros de vers√£o e passar a vers√£o de lan√ßamento correta.

#### Corre√ß√µes de Terminologia e Data

- **Terminologia de modal atualizada**: Mudou o modal "Adicionar Novo Perfil" para usar terminologia de "projeto" consistentemente atrav√©s da interface. Atualizadas tradu√ß√µes em ingl√™s para mostrar "Nome do Projeto" em vez de "Nome do Perfil".
- **Data de lan√ßamento v4.0.0 corrigida**: Corrigida a data de lan√ßamento de 2025-01-02 para a data real de lan√ßamento de 2025-09-03.

#### Corre√ß√µes do Servidor MCP e Processamento de Templates

- **Corre√ß√£o de conflitos de nomes de fun√ß√£o**: Resolvidos crashes do servidor causados por nomes de fun√ß√£o duplicados entre ferramentas MCP e fun√ß√µes de modelo. Atualizado `getDeletedTasksTool` ‚Üí `getDeletedTasks` e `recoverTaskTool` ‚Üí `recoverTask` com aliasing adequado de importa√ß√£o.
- **Corre√ß√£o de problemas de processamento de templates**: Resolvida sintaxe bruta do Handlebars aparecendo em respostas de ferramentas criando arquivos de template faltantes (`empty.md`, `noResults.md`, `success.md`) e corrigindo mapeamentos de nomes de vari√°veis entre geradores e templates.
- **Corre√ß√£o de registro de ferramentas MCP**: Corrigida nomenclatura de exporta√ß√£o e registro de ferramentas para garantir que todas as 7 novas ferramentas sejam adequadamente acess√≠veis atrav√©s da interface MCP.
- **Corre√ß√£o de erros de compila√ß√£o TypeScript**: Resolvidos problemas async/await em fun√ß√µes de filtro e adicionadas asser√ß√µes de tipo adequadas para par√¢metros opcionais.

Essas corre√ß√µes garantem uma experi√™ncia suave do usu√°rio com navega√ß√£o adequada, terminologia consistente, informa√ß√µes de lan√ßamento precisas, e integra√ß√£o totalmente funcional das ferramentas MCP.

## üìù Como Atualizar

Atualizar para v4.0.0 √© direto:

1. Puxe as √∫ltimas mudan√ßas do reposit√≥rio
2. Execute `npm install` para atualizar depend√™ncias
3. Execute `npm run build` para construir e iniciar a aplica√ß√£o
4. Limpe o cache do seu navegador para garantir que todos os novos estilos sejam carregados

√â isso! Nenhuma migra√ß√£o de banco de dados necess√°ria - apenas construa e execute.

## üöÄ O Que Vem Por A√≠

A Vers√£o 4.0.0 estabelece um novo padr√£o para o Shrimp Task Manager. A combina√ß√£o de gerenciamento de Arquivos, rastreamento de Solicita√ß√£o Inicial, gera√ß√£o de Resumo, sistema aprimorado de Notas de Lan√ßamento, e integra√ß√£o abrangente da API MCP cria um toolkit poderoso para gerenciar fluxos de trabalho de desenvolvimento complexos.

O novo sistema de Ferramentas MCP de Arquivo e Hist√≥rico abre possibilidades para:
- Integra√ß√£o com ferramentas de desenvolvimento externas e pipelines de CI/CD
- Fluxos de trabalho automatizados de gerenciamento de tarefas dirigidos por agentes IA
- Colabora√ß√£o aprimorada atrav√©s de acesso program√°tico a dados de tarefas
- An√°lises avan√ßadas e relat√≥rios sobre progresso de desenvolvimento
- Scripts de automa√ß√£o personalizados para opera√ß√µes repetitivas de gerenciamento de tarefas

Esta base posiciona o Shrimp Task Manager n√£o apenas como uma ferramenta independente, mas como um componente central de ecossistemas de desenvolvimento maiores.